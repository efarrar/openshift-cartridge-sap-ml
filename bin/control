#!/bin/bash

source $OPENSHIFT_CARTRIDGE_SDK_BASH

function start {
  $OPENSHIFT_ML_DIR/versions/16.0/mobilink/mlsrv16 -c "Driver=${OPENSHIFT_ML_DIR}/versions/16.0/mysql-connector-odbc/libmyodbc5.so;Server=${OPENSHIFT_MYSQL_DB_HOST};Database=${OPENSHIFT_APP_NAME};uid=${ML_USERNAME};pwd=${ML_PASSWORD}" -ud -zs $OPENSHIFT_APP_NAME -x http{host=$OPENSHIFT_ML_HOST\;port=$OPENSHIFT_ML_PORT} -o $OPENSHIFT_LOG_DIR/ml.log
}

function stop {
  $OPENSHIFT_ML_DIR/versions/16.0/mobilink/mlstop $OPENSHIFT_APP_NAME
}

case "$1" in
  start)
    start
  ;;
  stop)
    stop
  ;;
  *)
    echo 0
  ;;
esac
